<!-- Modal add new friend -->
<div class="modal fade" id="newFriendDialog" role="dialog" aria-labelledby="exampleModalCenterTitle"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Id of your friend</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Add more friends so you can start chats with them!</p>
                <input type="text" class="standardTextInput" id="newFriendField" required
                       placeholder="ðŸ‘¤ Enter your friend's webId">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" (click)="addFriend()" data-dismiss="modal">Add friend
                </button>
            </div>
        </div>
    </div>
</div>


<div class="bodyWrapper">
    <div class="recentChatsWrapper">
        <h3 id="userListTitle">Recent Chats</h3>
        <div class="chatList ">
            <app-chatlist></app-chatlist>
        </div>
        <button id="newChatButton" (click)="clearSearch()" type="button" class="btn btn-primary" data-toggle="modal"
                data-target="#newChatDialog">
        </button>
    </div>

    <div class="currentChat text-right">
        <div class="currentChatHeader">
            <div class="currentChatImageWrapper">
                <img *ngIf="chat == null" src="assets/images/portraits/emilio.svg" alt="" class="currentChatImage">
                <img *ngIf="chat != null" [src]="chat.img" alt="" class="currentChatImage">
            </div>
            <div *ngIf="chat != null" class="currentChatHeaderTitle">
                <h3>{{ chat.name }}</h3>
                <p *ngIf="chat.isGroup">
                    <span *ngFor="let p of participants"> {{ p }}, </span>
                </p>
                <button id="addParticipantBtn" type="button" class="btn btn-primary" data-toggle="modal"
                data-target="#addParticipantDialog" *ngIf="chat.isGroup">Add participant</button>
            </div>
        </div>

        <div *ngIf="chat != null" class="currentChatContent" #scroller [scrollTop]="scroller.scrollHeight">

            <div *ngFor="let mess of chat.messages" class="message"
                 [className]="mess.received ? 'message received' : 'message sent'">
                <div class="messageSender">{{mess.maker}}:</div>
                <div class="messageContent" name="message dummy">
                    {{mess.content}}
                </div>
                <div class="messageTime">{{mess.date}}</div>
            </div>
        </div>

        <form action="" class="currentChatInput" #f="ngForm" (submit)="onSubmit()">
            <!--<app-emoji-picker></app-emoji-picker>-->
            <input type="text" id="inputMessage" name="message" autocomplete="off" placeholder="Write here your message"/>
            <input type="submit" value="ï¸Žï¸Ž" id="submitMessage"/>
        </form>
    </div>


    <!-- Modal create new chat-->
    <div class="modal fade" id="newChatDialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Start new chat</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Select from the list the friends you want to chat with</p>
                    <input type="text" class="standardTextInput" id="searchBox" placeholder="ðŸ”Ž Search friends">
                    <div (click)="checkboxClick($event)" class="chooserItem" *ngFor="let user of userListPopup">
                        <input type="checkbox" class="new-chat-chk" id={{user.id}} name={{user.id}} unchecked>
                        <img [src]="user.img==null? 'assets/images/portraits/emilio.svg' : user.img " alt={{user.id}}
                             width="50px">
                        <label class="userLabel">{{user.username}}</label>
                    </div>
                    <p class="addMoreFriendsBanner">Add more friends:</p>
                    <button id="newFriendButton" type="button" class="btn btn-primary" data-dismiss="modal" data-toggle="modal"
                            data-target="#newFriendDialog">
                    </button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button id="newChatButton2" type="button" id="buttonCreateChat" class="btn btn-primary"
                            (click)="createNewChat()" data-dismiss="modal"
                    >Create chat
                    </button>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal group name-->
    <div class="modal fade" id="groupNameDialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Group name</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="text" class="standardTextInput" id="groupNameField" required
                           placeholder="ðŸ’¬ Enter a name for the group">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" (click)="addGroupName()" data-dismiss="modal">Create
                        group
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal add participant -->
    <div class="modal fade" id="addParticipantDialog" role="dialog" aria-labelledby="exampleModalCenterTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Id of the new participant</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Add a new participant to the group!</p>
                    <input type="text" class="standardTextInput" id="addParticipantField" required
                       placeholder="ðŸ‘¤ Enter the participant's webId">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" (click)="addParticipant()" 
                    data-dismiss="modal">Add participant</button>
                </div>
            </div>
        </div>
    </div>
